<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script>
        L_NO_TOUCH = false;
        L_DISABLE_3D = false;
    </script>
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <link rel="icon" href="{{url_for('static', filename='images/favicon.ico') }}"/>

    {#    <link rel="manifest" href="/static//static/assets/img/favicons/manifest.json">#}
    <meta name="msapplication-TileImage" content="/static//static/assets/img/favicons/mstile-150x150.png">
    <meta name="theme-color" content="#ffffff">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700%7cPoppins:300,400,500,600,700,800,900&amp;display=swap" rel="stylesheet">
    <link href="/static/vendors/simplebar/simplebar.min.css" rel="stylesheet">
    <link href="/static/assets/css/theme-rtl.min.css" rel="stylesheet" id="style-rtl">
    <link href="/static/assets/css/theme.min.css" rel="stylesheet" id="style-default">
    <link href="/static/assets/css/user-rtl.min.css" rel="stylesheet" id="user-style-rtl">
    <link href="/static/assets/css/user.min.css" rel="stylesheet" id="user-style-default">
    <link href="/static/css/map_result.css" rel="stylesheet" id="user-style-default">

    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>

    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-minimap/3.6.1/Control.MiniMap.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-minimap/3.6.1/Control.MiniMap.css"/>

    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css" />
    <script src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js"></script>

    <script src={{url_for('static', filename='js/modernizr.custom.79639.js')}}></script>
    <script src={{url_for('static', filename='js/geo_json.js')}}></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/sigungu_h.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/hangjungdong_b.js') }}"></script>

    <script src="{{ url_for('static', filename='src/Leaflet.draw.js')}}"></script>
    <script src="{{ url_for('static', filename='src/Leaflet.Draw.Event.js')}}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='src/leaflet.draw.css')}}"/>

    <script src="{{ url_for('static', filename='src/Toolbar.js')}}"></script>
    <script src="{{ url_for('static', filename='src/Tooltip.js')}}"></script>

    <script src="{{ url_for('static', filename='src/ext/GeometryUtil.js')}}"></script>
    <script src="{{ url_for('static', filename='src/ext/LatLngUtil.js')}}"></script>
    <script src="{{ url_for('static', filename='src/ext/LineUtil.Intersect.js')}}"></script>
    <script src="{{ url_for('static', filename='src/ext/Polygon.Intersect.js')}}"></script>
    <script src="{{ url_for('static', filename='src/ext/Polyline.Intersect.js')}}"></script>
    <script src="{{ url_for('static', filename='src/ext/TouchEvents.js')}}"></script>

    <script src="{{ url_for('static', filename='src/draw/DrawToolbar.js')}}"></script>
    <script src="{{ url_for('static', filename='src/draw/handler/Draw.Feature.js')}}"></script>
    <script src="{{ url_for('static', filename='src/draw/handler/Draw.SimpleShape.js')}}"></script>
    <script src="{{ url_for('static', filename='src/draw/handler/Draw.Polyline.js')}}"></script>
    <script src="{{ url_for('static', filename='src/draw/handler/Draw.Marker.js')}}"></script>
    <script src="{{ url_for('static', filename='src/draw/handler/Draw.Circle.js')}}"></script>
    <script src="{{ url_for('static', filename='src/draw/handler/Draw.CircleMarker.js')}}"></script>
    <script src="{{ url_for('static', filename='src/draw/handler/Draw.Polygon.js')}}"></script>
    <script src="{{ url_for('static', filename='src/draw/handler/Draw.Rectangle.js')}}"></script>

    <script src="{{ url_for('static', filename='src/edit/EditToolbar.js')}}"></script>
    <script src="{{ url_for('static', filename='src/edit/handler/EditToolbar.Edit.js')}}"></script>
    <script src="{{ url_for('static', filename='src/edit/handler/EditToolbar.Delete.js')}}"></script>

    <script src="{{ url_for('static', filename='src/Control.Draw.js')}}"></script>

    <script src="{{ url_for('static', filename='src/edit/handler/Edit.Poly.js')}}"></script>
    <script src="{{ url_for('static', filename='src/edit/handler/Edit.SimpleShape.js')}}"></script>
    <script src="{{ url_for('static', filename='src/edit/handler/Edit.Rectangle.js')}}"></script>
    <script src="{{ url_for('static', filename='src/edit/handler/Edit.Marker.js')}}"></script>
    <script src="{{ url_for('static', filename='src/edit/handler/Edit.CircleMarker.js')}}"></script>
    <script src="{{ url_for('static', filename='src/edit/handler/Edit.Circle.js')}}"></script>



    <script src="/static/assets/js/config.js"></script>
    <script src="/static/vendors/simplebar/simplebar.min.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <script>
        var isRTL = JSON.parse(localStorage.getItem('isRTL'));
        if (isRTL) {
            var linkDefault = document.getElementById('style-default');
            var userLinkDefault = document.getElementById('user-style-default');
            linkDefault.setAttribute('disabled', true);
            userLinkDefault.setAttribute('disabled', true);
            document.querySelector('html').setAttribute('dir', 'rtl');
        } else {
            var linkRTL = document.getElementById('style-rtl');
            var userLinkRTL = document.getElementById('user-style-rtl');
            linkRTL.setAttribute('disabled', true);
            userLinkRTL.setAttribute('disabled', true);
        }
    </script>
    <script>
        var last_search_lat = 37.577;
        var last_search_lon = 126.8916;

        function init_login() {
            last_search_lat = localStorage.getItem("last_lat");
            last_search_lon = localStorage.getItem("last_lon");

            last_sido_cd = localStorage.getItem("last_sido_cd");
            last_bjdong_cd = localStorage.getItem("last_bjdong_cd");

            console.log(typeof(last_search_lat));
            console.log(last_search_lon);
            map.setView([last_search_lat, last_search_lon], 15, {zoomControl: false});

            select_set_value(last_sido_cd, last_bjdong_cd);
        };
    </script>
</head>

<body onload="javascript:init_login();">
<main class="main" id="top">
    <div id="container" class="container">
        <input type="hidden" id="adm_cd_real" name="adm_cd_real">
        <input type="hidden" id="bjdong_cd" name="bjdong_cd">
        <input type="hidden" id="bjdong2" name="bjdong2">
        <input type="hidden" id="bjdong_nm" name="bjdong_nm">
        <script>
            var isFluid = JSON.parse(localStorage.getItem('isFluid'));
            if (isFluid) {
                var container = document.querySelector('[data-layout]');
                container.classList.remove('container');
                container.classList.add('container-fluid');
            }
        </script>
        <nav class="navbar navbar-light navbar-vertical navbar-expand-xl">{% include 'nav.html' %}</nav>
        <div class="content">
            <nav class="navbar navbar-light navbar-glass navbar-top navbar-expand">{% include 'nav2.html' %}</nav>
            <!--            회원 그래프-->
            <p style="margin-top: 20px;"><b>교육 상권 분석</b></p>

            <div class="card mb-3">
                <div class="card-header">
                    <div>
                        <div style="display: flex; justify-content: flex-start; margin-top: 10px;">
                            <div style="margin-right: auto;">
                                <p>지역 선택</p>
                            </div>
                            {#                            <div class="d-lg-flex justify-content-between" style="float: right;">#}
                            {#                                <div>#}
                            {#                                    <div id="table-ticket-replace-element">#}
                            {#                                        <button class="btn btn-falcon-default btn-sm" type="button" onclick="academy_oauth();">학원 추가·삭제</button>#}
                            {#                                    </div>#}
                            {#                                </div>#}
                            {#                            </div>#}
                        </div>
                        <div class="d-flex">
                            <select id="sido" style="font-size: 12px;" class="form-select form-select-sm"><option value="">선택</option></select>&nbsp;
                            <select id="sigugun" style="font-size: 12px;" class="form-select form-select-sm"><option value="">선택</option></select>&nbsp;
                            <select id="dong" style="font-size: 12px;" class="form-select form-select-sm" onchange="edu_search();"><option value="">선택</option></select>
                        </div>
                        <div class="d-flex" >
                            <div><p id="polygon_bjdong_nm" class="mt-3" ></p></div>
                        </div>
                    </div>
                </div>
            </div>
            <!--        맵 정보-->

            <div class="card mb-3" style="width: 100%; height: 60%;">
                <div class="card-body">
                    <div id="map" style="width: 100%; height: 100%; border-radius: 5px 5px 5px 5px; position: relative">
                        <div style="position: absolute; z-index: 1000; top: 90%; right: 1.9%;">
                            <img id="minusButton" src="{{ url_for('static', filename='images/reset.png') }}" width="30" height="30" class="zoom-image" onclick="map_reset();">
                        </div>
                    </div>
                    <div class="wrap-loading display-none">
                        <div><img src="../static/images/Ghost.gif" width="70" height="70" style="border-radius: 50%;"/></div>
                    </div>
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-body">
                    <div class="row h-100 justify-content-between g-0">
                        <div class="col-5 col-sm-6 col-xxl pe-2" style="width: 60%;">
                            <h6 class="mt-1">노피곰 지역 등급 (참고)
                                <span class="ms-1 text-400" data-bs-toggle="tooltip" data-bs-placement="top" title="- A 등급&#10; > 4~8세 120명 이상&#10; > 유초 1개이상&#10; > 경쟁 2개이상
                                                                                                                    - B등급&#10; > 4~8세 80명 이상&#10; > 유초 0개&#10; > 경쟁 1개이상
                                                                                                                    - C등급&#10; > 4~8세 80명 미만&#10; > 유초 1개이상&#10; > 경쟁 0개">
                                    <span class="far fa-question-circle"></span>
                                </span></h6>
                            <div class="fs--2 mt-3">
                                <div class="d-flex flex-between-center mb-1">
                                    <div class="d-flex align-items-center">
                                        <span class="dot bg-primary"></span><span class="fw-semi-bold" id="amd_info17">4~9세 (추정)</span>
                                    </div>
                                </div>
                                <div class="d-flex flex-between-center mb-1">
                                    <div class="d-flex align-items-center">
                                        <span class="dot bg-primary"></span><span class="fw-semi-bold" id="amd_info19_03">초등 (추정)</span>
                                    </div>
                                </div>
                                <div class="d-flex flex-between-center mb-1">
                                    <div class="d-flex align-items-center">
                                        <span class="dot bg-primary"></span><span class="fw-semi-bold" id="amd_info17_01">유.초 학교</span>
                                    </div>
                                </div>
                                <div class="d-flex flex-between-center mb-1">
                                    <div class="d-flex align-items-center">
                                        <span class="dot bg-primary"></span><span class="fw-semi-bold" id="amd_info17_02">경쟁(시설형)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-auto text-center ps-3" style="width: 40%;">
                            <div class="fs-2 fw-normal font-sans-serif text-primary mb-3 lh-1" id="amd_info18">-등급</div>
                        </div>
                    </div>
                    <div class="row product-content product-store" id="polygon-data-container">
                        <!-- data.html -->
                    </div>
                </div>
            </div>
            <div class="card  mb-3">
                <div class="card-body">
                    <div class="row h-100 justify-content-between g-0">
                        <div class="col-sm-6 col-xxl pe-2" style="width: 100%;">
                            <h6 class="mt-1">학교 정보(2022년)</h6>
                            <div class="fs--2 mt-3" id="school_info">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card mb-3">
                <div class="card-body">
                    <div class="row h-100 justify-content-between g-0">
                        <div class="col-sm-6 col-xxl pe-2" style="width: 100%;">
                            <h6 class="mt-1">세대수 정보</h6>
                            <div class="fs--2 mt-3" id="building_business_info">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {#                <div class="col-sm-6 col-xxl-3 ps-sm-2 order-xxl-1 mb-3 mb-xxl-0">#}
            {#                    <div class="card h-md-100">#}
            {#                        <div class="card-body">#}
            {#                            <div class="row h-100 justify-content-between g-0">#}
            {#                                <div class="col-sm-6 col-xxl pe-2" style="width: 100%;">#}
            {#                                    <h6 class="mt-1">인구 정보(2021년 통계청)</h6>#}
            {#                                    <div class="fs--2 mt-3">#}
            {#                                        <div class="d-flex flex-between-center mb-1">#}
            {#                                            <div class="d-flex align-items-center"><span class="dot bg-primary"></span><span class="fw-semi-bold text-900" id="amd_info0">전체인구</span></div>#}
            {#                                        </div>#}
            {#                                        <div class="d-flex flex-between-center mb-1">#}
            {#                                            <div class="d-flex align-items-center"><span class="dot bg-primary"></span><span class="fw-semi-bold text-900" id="amd_info1">0~4세</span></div>#}
            {#                                        </div>#}
            {#                                        <div class="d-flex flex-between-center mb-1">#}
            {#                                            <div class="d-flex align-items-center"><span class="dot bg-primary"></span><span class="fw-semi-bold text-900" id="amd_info2">4~8세</span></div>#}
            {#                                        </div>#}
            {#                                        <div class="d-flex flex-between-center mb-1">#}
            {#                                            <div class="d-flex align-items-center"><span class="dot bg-primary"></span><span class="fw-semi-bold text-900" id="amd_info3">7~12세</span></div>#}
            {#                                        </div>#}
            {#                                        <div class="d-flex flex-between-center mb-1">#}
            {#                                            <div class="d-flex align-items-center"><span class="dot bg-primary"></span><span class="fw-semi-bold text-900" id="amd_info4">13~15세</span></div>#}
            {#                                        </div>#}
            {#                                    </div>#}
            {#                                </div>#}
            {#                            </div>#}
            {#                        </div>#}
            {#                    </div>#}
            {#                </div>#}
            <div class="card mb-3">
                <div class="card-body">
                    <div class="row h-100 justify-content-between g-0">
                        <div class="col-sm-6 col-xxl pe-2" style="width: 100%;">
                            <h6 class="mt-1">학원 정보</h6>
                            <div class="fs--2 mt-3" id="academy_info_nopigon">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
<script>
    // map 생성
    map = L.map('map', {
        'detectRetina': true,
        'maxNativeZoom': 25,
        'maxZoom': 18,
        'minZoom': 14
    }).setView([last_search_lat, last_search_lon], 16);
    // 타일 레이어 생성
    tile_layer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',

        }
    ).addTo(map);
    {#map.removeControl(map.zoomControl);#}
</script>
<script src="{{url_for('static', filename='js/map_info.js')}}"></script>
<script src="{{url_for('static', filename='js/edu_info.js')}}"></script>
<script src="{{url_for('static', filename='js/map_info_button.js')}}"></script>
<script src="{{url_for('static', filename='js/index_home.js')}}"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="/static/vendors/popper/popper.min.js"></script>
<script src="/static/vendors/bootstrap/bootstrap.min.js"></script>
<script src="/static/vendors/anchorjs/anchor.min.js"></script>
<script src="/static/vendors/is/is.min.js"></script>
<script src="/static/vendors/echarts/echarts.min.js"></script>
<script src="/static/vendors/fontawesome/all.min.js"></script>
<script src="/static/vendors/lodash/lodash.min.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=window.scroll"></script>
<script src="/static/vendors/list.js/list.min.js"></script>
<script src="/static/assets/js/theme.js"></script>
<script src="/static/js/dashboard.js"></script>
<script src="{{ url_for('static', filename='js/plugins.js')}}"></script>
<script src="{{ url_for('static', filename='js/script.js')}}"></script>

</body>
</html>
